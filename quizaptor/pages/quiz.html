<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz - Quizaptor</title>
    
    <!-- Fuentes -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Estilos -->
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/quiz.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <a href="../index.html" class="logo">
                      <img src="../assets/q_logo.png" alt="Quizaptor"/>
                    <span class="logo-text">Quizaptor</span>
                </a>
                <div class="quiz-header-info">
                    <span class="quiz-name" id="quizHeaderTitle">Cargando...</span>
                </div>
                <a href="../index.html" class="btn btn-secondary">Volver al Inicio</a>
            </div>
        </div>
    </header>

    <!-- Quiz Container -->
    <div class="quiz-container">
        <div class="container">
            <!-- Quiz Info Bar -->
            <div class="quiz-info-bar">
                <div class="quiz-progress-section">
                    <div class="progress-label">
                        <span>Progreso del Quiz</span>
                        <span class="progress-text"><span id="currentQuestion">1</span> de <span id="totalQuestions">40</span></span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                </div>
                <div class="quiz-timer">
                    <svg class="timer-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M12 6v6l4 2"/>
                    </svg>
                    <span id="timer">60:00</span>
                </div>
            </div>

            <!-- Main Quiz Content -->
            <div class="quiz-content">
                <!-- Question Card -->
                <div class="question-card">
                    <div class="question-header">
                        <span class="question-number">Pregunta <span id="questionNumber">1</span></span>
                        <div class="question-actions">
                            <button class="action-btn" id="flagBtn" title="Marcar para revisión">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"/>
                                    <line x1="4" y1="22" x2="4" y2="15"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    
                    <div class="question-content">
                        <h2 class="question-text" id="questionText">Cargando pregunta...</h2>
                    </div>

                    <div class="options-container" id="optionsContainer">
                        <!-- Options will be inserted here by JavaScript -->
                    </div>

                    <div class="question-navigation">
                        <button class="btn btn-secondary" id="prevBtn" disabled>
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" width="18" height="18">
                                <path d="M19 12H5M12 19l-7-7 7-7"/>
                            </svg>
                            Anterior
                        </button>
                        <button class="btn btn-primary" id="nextBtn">
                            Siguiente
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" width="18" height="18">
                                <path d="M5 12h14M12 5l7 7-7 7"/>
                            </svg>
                        </button>
                        <button class="btn btn-success" id="submitBtn" style="display: none;">
                            Finalizar Quiz
                        </button>
                    </div>
                </div>

                <!-- Question Palette Sidebar -->
                <div class="question-palette">
                    <h3 class="palette-title">Navegación de Preguntas</h3>
                    <div class="palette-legend">
                        <div class="legend-item">
                            <span class="legend-box answered"></span>
                            <span>Respondida</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-box flagged"></span>
                            <span>Marcada</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-box current"></span>
                            <span>Actual</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-box"></span>
                            <span>No vista</span>
                        </div>
                    </div>
                    <div class="palette-grid" id="paletteGrid">
                        <!-- Question buttons will be inserted here -->
                    </div>
                    <div class="palette-summary">
                        <div class="summary-item">
                            <span class="summary-label">Respondidas:</span>
                            <span class="summary-value" id="answeredCount">0</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Marcadas:</span>
                            <span class="summary-value" id="flaggedCount">0</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Sin responder:</span>
                            <span class="summary-value" id="unansweredCount">40</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Results Modal -->
    <div class="modal" id="resultsModal">
        <div class="modal-content results-modal">
            <div class="results-header">
                <h2>¡Quiz Completado!</h2>
                <p class="results-subtitle">Tu resultado</p>
            </div>
            
            <div class="results-body">
                <div class="score-circle">
                    <svg class="score-ring" viewBox="0 0 200 200">
                        <circle class="score-ring-bg" cx="100" cy="100" r="85" fill="none" stroke-width="15"/>
                        <circle class="score-ring-fill" id="scoreRingFill" cx="100" cy="100" r="85" fill="none" stroke-width="15"/>
                    </svg>
                    <div class="score-text">
                        <span class="score-percentage" id="scorePercentage">0%</span>
                        <span class="score-label">Puntuación</span>
                    </div>
                </div>

                <div class="results-stats">
                    <div class="result-stat">
                        <svg class="result-icon correct" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                            <polyline points="22 4 12 14.01 9 11.01"/>
                        </svg>
                        <div class="result-stat-content">
                            <span class="result-stat-value" id="correctAnswers">0</span>
                            <span class="result-stat-label">Correctas</span>
                        </div>
                    </div>
                    
                    <div class="result-stat">
                        <svg class="result-icon incorrect" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <circle cx="12" cy="12" r="10"/>
                            <line x1="15" y1="9" x2="9" y2="15"/>
                            <line x1="9" y1="9" x2="15" y2="15"/>
                        </svg>
                        <div class="result-stat-content">
                            <span class="result-stat-value" id="incorrectAnswers">0</span>
                            <span class="result-stat-label">Incorrectas</span>
                        </div>
                    </div>
                    
                    <div class="result-stat">
                        <svg class="result-icon time" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 6v6l4 2"/>
                        </svg>
                        <div class="result-stat-content">
                            <span class="result-stat-value" id="timeSpent">0:00</span>
                            <span class="result-stat-label">Tiempo</span>
                        </div>
                    </div>
                </div>

                <div class="pass-status" id="passStatus">
                    <svg class="status-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                        <polyline points="22 4 12 14.01 9 11.01"/>
                    </svg>
                    <span class="status-text">¡Aprobado! Has superado el 65% requerido</span>
                </div>

                <div class="results-actions">
                    <button class="btn btn-outline" id="reviewBtn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" width="18" height="18">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                            <circle cx="12" cy="12" r="3"/>
                        </svg>
                        Revisar Respuestas
                    </button>
                    <button class="btn btn-primary" id="retakeBtn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" width="18" height="18">
                            <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
                        </svg>
                        Reintentar Quiz
                    </button>
                    <a href="../index.html" class="btn btn-secondary">Volver al Inicio</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div class="modal" id="confirmModal">
        <div class="modal-content confirm-modal">
            <div class="confirm-header">
                <svg class="warning-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                    <line x1="12" y1="9" x2="12" y2="13"/>
                    <line x1="12" y1="17" x2="12.01" y2="17"/>
                </svg>
                <h3>¿Finalizar Quiz?</h3>
            </div>
            <p class="confirm-message">
                Tienes <span id="unansweredCountConfirm">0</span> pregunta(s) sin responder. 
                ¿Estás seguro de que deseas finalizar el quiz?
            </p>
            <div class="confirm-actions">
                <button class="btn btn-secondary" id="cancelSubmitBtn">Cancelar</button>
                <button class="btn btn-primary" id="confirmSubmitBtn">Sí, Finalizar</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="../data/ISTQB-Foundation-Level.js"></script>
    <script src="../data/java-fundamentals-data.js"></script>
    <script src="../data/selenium-quiz-data.js"></script>
    <script src="../data/postman-quiz-data.js"></script>
    <script src="../data/jmeter-quiz-data.js"></script>
    <script src="../data/cucumber-quiz-data.js"></script>
    <script src="../data/devtools-qa-quiz-data.js"></script>
    <script src="../data/java-selenium-quiz-data.js"></script>
    <script src="../js/quiz.js"></script>
</body>
</html>
